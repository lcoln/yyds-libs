"use strict";import"../icon-wc/index.js";const skins={1:"pages-green",2:"pages-blue",3:"pages-pine",4:"pages-darkGreen",5:"pages-yellow",6:"pages-purple"};export default class Page extends HTMLElement{static get observedAttributes(){return["max","total","skin","showJumpBtn","curr"]}constructor(e){super(e),Object.defineProperty(this,"root",{value:this.attachShadow({mode:"open"}),writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(this,"props",{value:{max:6,total:100,skin:1,showJumpBtn:!1,curr:1},writable:!0,enumerable:!1,configurable:!0}),this.root.innerHTML='<style>* { margin: 0; padding: 0; box-sizing: border-box; } a { text-decoration: none; } a:focus { outline: none; } .wc-ui-pages { display: flex; justify-content: center; height: 31px; margin: 13px 0 10px 0; text-align: center; font-size: 13px; /* span:hover{ border: 1px solid #738AE0;color: #738AE0; } */ } .wc-ui-pages span { display: inline-block; height: 30px; padding: 5px; margin: 0 4px; min-width: 30px; border: 1px solid #DCDFEC; border-radius: 2px; line-height: 20px; /*border-right: none; */ cursor: pointer; letter-spacing: 0; transition: 0.4s; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; -khtml-user-select: none; user-select: none; } .wc-ui-pages .pages-first, .wc-ui-pages .pages-last { width: 40px; } .wc-ui-pages .pages-active { color: #fff; box-shadow: 0px 0 5px #ccc; } .wc-ui-pages .pages-active:hover { color: #fff !important; } .wc-ui-pages.pages-green { color: #00B29E; } .wc-ui-pages.pages-green .pages-active { background: #00B29E; border-color: #00B29E; } .wc-ui-pages.pages-green .pages-msg { background: rgba(0, 178, 158, 0.6); } .wc-ui-pages.pages-blue { color: #00AAD0; } .wc-ui-pages.pages-blue .pages-active { background: #00AAD0; border-color: #00AAD0; } .wc-ui-pages.pages-blue .pages-msg { background: rgba(0, 170, 208, 0.6); } .wc-ui-pages.pages-pine { color: #FD5652; } .wc-ui-pages.pages-pine .pages-active { background: #FD5652; border-color: #FD5652; } .wc-ui-pages.pages-pine .pages-msg { background: rgba(253, 86, 82, 0.6); } .wc-ui-pages.pages-darkGreen { color: #1E4B58; } .wc-ui-pages.pages-darkGreen .pages-active { background: #1E4B58; border-color: #1E4B58; } .wc-ui-pages.pages-darkGreen .pages-msg { background: rgba(30, 75, 88, 0.6); } .wc-ui-pages.pages-yellow { color: #FEB364; } .wc-ui-pages.pages-yellow .pages-active { background: #FEB364; border-color: #FEB364; } .wc-ui-pages.pages-yellow .pages-msg { background: rgba(254, 179, 100, 0.6); } .wc-ui-pages.pages-purple { color: #5a5b6d; } .wc-ui-pages.pages-purple .pages-active { background: #738AE0; border-color: #738AE0; } .wc-ui-pages.pages-purple .pages-msg { background: rgba(91, 115, 234, 0.6); } </style> <div class="wc-ui-pages pages-green">  <span> <icon-wc type="left"></icon-wc> </span>  <div class="ui-page-box"></div>  <span> <icon-wc type="right"></icon-wc> </span>  </div> ',this.__ELM__=Array.from(this.root.children),this.__DOM__=this.__ELM__[1],this?.__REGIESTRYCONFIG__();var a={__PAGE__:this.__DOM__.children[1]};try{for(var s of Object.keys(a))this[s]=a[s]}catch(e){}}async connectedCallback(){let p=this;this.__DOM__.addEventListener("click",function(e){let{curr:a}=p.props;var{target:s}=e,{nodeName:r,type:t,innerHTML:e,className:s}=s;if("ICON-WC"===r){switch(t){case"left":a--;break;case"right":a++}p._jump(a)}else"SPAN"===r&&"..."!==e&&(0<parseInt(e)&&(a=parseInt(e)),"ui-page-prev"===s&&a--,"ui-page-next"===s&&a++,p._jump(a));p.dispatchEvent(new CustomEvent("select",{detail:a}))}),this._render(1)}disconnectedCallback(){console.log("unmount")}attributeChangedCallback(e,a,s){switch(e){case"curr":this._render(s);break;case"total":this._render(1);break;case"skin":this.__DOM__.setAttribute("class",`wc-ui-pages ${skins[s]||skins[1]}`)}}adoptedCallback(){console.log("adopted")}_render(s){let e=this._calculate(s);var{total:a,max:r}=this.props;let t=e.map((e,a)=>`<span class="ui-page ${s===e?"pages-active":""}">
          ${e}
        </span>`);var p='<span class="ui-page ui-page-more">...</span>';r<a&&(2!==e[1]&&t.splice(1,0,p),e[r-2]!==a-1&&t.splice(t.length-1,0,p)),this.__PAGE__.innerHTML=t.join("")}_calculate(r){var{max:t,total:p}=this.props,i=Math.floor(t/2),o=0;let c=[];for(let e=0,a=o=p-r<i&&t<=p?p-(t-1):0<r-i&&t<=p?r-i:1,s=i=t-1+o<p?t-1+o:p;e<t;e++,a++)a<=s&&(c[e]=a);return c[t-1]!==p&&(c[t-1]=p),1!==c[0]&&(c[0]=1),c}_jump(e){if(e<=0||e>this.props.total)return console.log("超过跳转范围");this.props.curr=e,this._render(e)}}