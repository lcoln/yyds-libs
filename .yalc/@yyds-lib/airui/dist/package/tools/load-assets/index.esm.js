let t=document.getElementsByTagName("head")[0],s={};class e{constructor(t){this.uri=t,this.state=0,this.callbacks=[]}start(t){2!==this.state?1!==this.state?(this.state=1,this.el&&(this.el.onload=null,this.el.onerror=null,this.el.parentNode.removeChild(this.el)),this.makeEl(t)):this.callbacks.push(t):t(!0)}makeEl(s){let e=this,l={css:"link",js:"script"}[this.uri.substr(this.uri.lastIndexOf(".")+1)]||"script";console.log({tag:l}),this.el=document.createElement(l),this.el.onload=()=>{this.callbacks.push(s),e.callResult(!0)},this.el.onerror=()=>{e.callResult(!1)},"link"===l?(this.el.rel="stylesheet",this.el.type="text/css",this.el.href=this.uri):(this.el.async="async",this.el.src=this.uri),t.insertBefore(this.el,t.lastChild)}callResult(t){let s=this.callbacks;this.callbacks=[],this.state=t?2:0,s.forEach((s=>s(t)))}}var l={load:t=>new Promise(((l,i)=>{let a=s[t];a||(a=new e(t),s[t]=a),a.start((t=>{l(t)}))})),async loads(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(let s of t)await this.load(s)}};export default l;
